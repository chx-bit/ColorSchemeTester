<!DOCTYPE html>
<html lang="id">
  <head>
    <meta charset="UTF-8" />

    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <title>Dynamic Color Tester - Tailwind v4</title>

    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/@simonwep/pickr/dist/themes/monolith.min.css"
    />

    <script src="https://cdn.jsdelivr.net/npm/@tailwindcss/browser@4"></script>

    <script src="https://cdn.jsdelivr.net/npm/@simonwep/pickr/dist/pickr.min.js"></script>
    <script
      src="https://kit.fontawesome.com/ab905a7751.js"
      crossorigin="anonymous"
    ></script>
    <link rel="stylesheet" href="./css/style.css" />

    <script
      src="https://unpkg.com/@dotlottie/player-component@2.7.12/dist/dotlottie-player.mjs"
      type="module"
    ></script>

    <style>
      @import url("https://fonts.googleapis.com/css2?family=Inter:ital,opsz,wght@0,14..32,100..900;1,14..32,100..900&family=Pixelify+Sans:wght@400..700&family=Poppins:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&family=VT323&display=swap");
      .picker-toolbar {
        background-color: rgba(114, 114, 114, 0.1);
        backdrop-filter: blur(10px);
      }

      .picker-toolbar.is-hidden {
        opacity: 0;
        transform: translateY(150%);
      }

      .pickr .pcr-button {
        width: 40px;
        height: 40px;
      }

      @media (max-width: 600px) {
        .pickr .pcr-button {
          width: 30px;
          height: 30px;
        }
      }
    </style>
  </head>

  <body
    class="font-family-poppins min-h-screen bg-primary text-font-primary antialiased leading-relaxed"
  >
    <nav class="flex items-center text-sm justify-between px-6 py-4">
      <div class="flex justify-center items-center text-2xl">
        <img src="color-palette.png" alt="color" class="w-8 mr-2" />
        <span class="font-semibold">Dy</span>
        <p class="font-bold animated-gradient-text text-transparent">namic</p>
      </div>
      <div id="navbardesk" class="not-sm:hidden not-md:hidden flex gap-6">
        <a
          href=""
          class="rounded-2xl px-5 py-2 hover:bg-[#ffffff09] easeout600 hover:scale-110"
          >Home</a
        >
        <a
          href=""
          class="rounded-2xl px-5 py-2 hover:bg-[#ffffff09] easeout600 hover:scale-110"
          >About</a
        >
        <a
          href=""
          class="rounded-2xl px-5 py-2 hover:bg-[#ffffff09] easeout600 hover:scale-110"
          >Feature</a
        >
        <a
          href=""
          class="rounded-2xl px-5 py-2 hover:bg-[#ffffff09] easeout600 hover:scale-110"
          >Contact</a
        >
      </div>
      <div
        id="navbarmobile"
        class="sm:hidden absolute top-[6rem] left-0 right-0 mx-10 p-6 bg-transparent rounded-2xl border-[1px] border-[#ffffff3b] backdrop-blur-xs opacity-0 pointer-events-none transition-all duration-600 ease-out"
      >
        <div class="flex-center-all flex-col gap-2 text-xl text-center">
          <a
            href=""
            class="rounded-2xl p-3 w-[100%] hover:bg-[#ffffff09] easeout600"
            >Home</a
          >
          <a
            href=""
            class="rounded-2xl p-3 w-[100%] hover:bg-[#ffffff09] easeout600"
            >About</a
          >
          <a
            href=""
            class="rounded-2xl p-3 w-[100%] hover:bg-[#ffffff09] easeout600"
            >Feature</a
          >
          <a
            href=""
            class="rounded-2xl p-3 w-[100%] hover:bg-[#ffffff09] easeout600"
            >Contact</a
          >
        </div>
      </div>
      <button id="toggle" class="cursor-pointer z-[1001] sm:hidden">
        <i
          class="fa-solid fa-bars text-[30px] text-transparent animated-gradient-text"
        ></i>
      </button>
      <button
        class="not-sm:hidden not-md:hidden font-family-poppins font-semibold text-[14px] bg-violet-600 text-[#f9f9f9] rounded-2xl py-1.5 px-3.5"
      >
        Support Me!
      </button>
    </nav>
    <div
      id="picker-toolbar"
      class="picker-toolbar color-font-primary fixed bottom-5 left-1/2 z-[1000] font-family-poppins flex -translate-x-1/2 gap-4 rounded-2xl border-1 border-[#f9f9f9] pb-1 px-4 pt-4 sm:p-4 shadow-[0_5px_10px_rgba(0,0,0,0.2)] transition-all duration-600 ease-out"
    ></div>
    <div class="fixed w-screen h-screen z-[-10]">
      <div
        class="absolute rounded-[100%] top-[-20dvh] sm:top-[-60dvh] right-0 size-[300px] sm:size-[500px] bg-conic from-violet-500/40 to-blue-700/30 to-50% blur-3xl"
      ></div>
    </div>
    <div class="flex-center-all min-h-[80dvh] max-w-screen">
      <h1
        id="typing-effect"
        class="color-font-primary typing-effect text-5xl sm:text-6xl md:text-7xl font-[500] text-center font-family-pixelsans"
      >
        Dynamic Color Scheme Tester.
      </h1>
    </div>
    <button class="btn-primary min-h-[100vh]">tes</button>
    <script>
      document.addEventListener("DOMContentLoaded", () => {
        const toggleButton = document.getElementById("toggle");
        const mobileNav = document.getElementById("navbarmobile");
        const toggleIcon = toggleButton.querySelector("i");
        toggleButton.addEventListener("click", () => {
          if (mobileNav.classList.contains("top-[6rem]")) {
            mobileNav.classList.remove("top-[6rem]");
            mobileNav.classList.remove("opacity-100");
            mobileNav.classList.remove("pointer-events-auto");

            mobileNav.classList.add("top-[-50dvh]");
            mobileNav.classList.add("opacity-0");
            mobileNav.classList.add("pointer-events-none");

            toggleIcon.classList.remove("fa-xmark");
            toggleIcon.classList.add("fa-bars");
          } else {
            mobileNav.classList.remove("top-[-50dvh]");
            mobileNav.classList.remove("opacity-0");
            mobileNav.classList.remove("pointer-events-none");

            mobileNav.classList.add("top-[6rem]");
            mobileNav.classList.add("opacity-100");
            mobileNav.classList.add("pointer-events-auto");

            toggleIcon.classList.remove("fa-bars");
            toggleIcon.classList.add("fa-xmark");
          }
        });
        const headingElement = document.getElementById("typing-effect");

        const textToType =
          "Dynamic Color<br class='block sm:hidden'> Scheme Tester.";

        const typingSpeed = 150;
        const erasingSpeed = 100;
        const delayBeforeErase = 8000;

        function createCursor() {
          const cursor = document.createElement("span");
          cursor.className =
            "inline-block w-[4px] h-[1em] ml-2 bg-font-primary animate-[blink_1s_infinite]";
          return cursor;
        }

        // Fungsi utama
        async function typingLoop() {
          let currentText = "";
          const cursor = createCursor();
          headingElement.append(cursor);

          while (true) {
            // --- FASE MENGETIK ---
            for (let i = 0; i < textToType.length; i++) {
              if (textToType.substring(i).startsWith("<br")) {
                const brTag = "<br class='block sm:hidden'>";
                currentText += brTag;
                i += brTag.length - 1;
              } else {
                currentText += textToType[i];
              }
              headingElement.innerHTML = currentText;
              headingElement.append(cursor);
              await new Promise((resolve) => setTimeout(resolve, typingSpeed));
            }

            await new Promise((resolve) =>
              setTimeout(resolve, delayBeforeErase)
            );

            for (let i = currentText.length; i > 0; i--) {
              if (currentText.endsWith("<br class='block sm:hidden'>")) {
                const brTag = "<br class='block sm:hidden'>";
                currentText = currentText.slice(0, -brTag.length);
                i -= brTag.length - 1;
              } else {
                currentText = currentText.slice(0, -1);
              }
              headingElement.innerHTML = currentText;
              headingElement.append(cursor);
              await new Promise((resolve) => setTimeout(resolve, erasingSpeed));
            }
          }
        }

        // Mulai animasi
        typingLoop();
      });
      window.addEventListener("load", () => {
        const root = document.documentElement;
        const getCssVariable = (variable) =>
          getComputedStyle(root).getPropertyValue(variable).trim();
        const toolbar = document.getElementById("picker-toolbar");
        const colorControlsConfig = [
          { label: "Primary", cssVar: "--color-primary" },
          { label: "Secondary", cssVar: "--color-secondary" },
          { label: "Card BG", cssVar: "--color-card" },
          { label: "Card Font", cssVar: "--color-card-font" },
          { label: "Font Primary", cssVar: "--color-font-primary" },
          { label: "Button", cssVar: "--color-button" },
          { label: "Shadow", cssVar: "--color-shadow" },
        ];

        colorControlsConfig.forEach((config) => {
          const wrapper = document.createElement("div");
          wrapper.className = "text-center";
          const label = document.createElement("label");
          label.className =
            "mt-1 block text-[10px] sm:text-xs font-medium color-font-primary";
          label.textContent = config.label;
          const pickerPlaceholder = document.createElement("div");
          wrapper.append(pickerPlaceholder, label);
          toolbar.append(wrapper);
          const pickr = Pickr.create({
            el: pickerPlaceholder,
            theme: "monolith",
            default: getCssVariable(config.cssVar) || "#ffffff",
            cssVar: config.cssVar,
            position: "top-middle",
            components: {
              preview: true,
              opacity: true,
              hue: true,
              interaction: { hex: true, rgba: true, input: true, save: false },
            },
          });
          pickr
            .on("change", (color, source, instance) => {
              root.style.setProperty(
                instance.options.cssVar,
                color.toHEXA().toString()
              );
            })
            .on("hide", (instance) => {
              const finalColor = instance.getColor().toHEXA().toString();
              instance.setColor(finalColor);
              root.style.setProperty(instance.options.cssVar, finalColor);
            });
        });
        let idleTimer = null;
        const showDuration = 3000;
        const showToolbar = () => {
          clearTimeout(idleTimer);
          toolbar.classList.remove("is-hidden");
          idleTimer = setTimeout(() => {
            toolbar.classList.add("is-hidden");
          }, showDuration);
        };
        window.addEventListener("mousemove", showToolbar);
        window.addEventListener("scroll", showToolbar);
        toolbar.addEventListener("mouseenter", () => clearTimeout(idleTimer));
        toolbar.addEventListener("mouseleave", showToolbar);
        showToolbar();
      });
    </script>
  </body>
</html>
